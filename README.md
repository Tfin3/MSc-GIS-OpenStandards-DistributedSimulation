[![DOI](https://zenodo.org/badge/1036583558.svg)](https://doi.org/10.5281/zenodo.16812719)
# Introduction
This is the code used in the MSc Dissertation titled

***Using GIS to understand the likelihood of correlation errors during distributed simulators that use open standards*** 

it is divided into 5 sections:
- A - [Code related to OGC CDB](#ogc-cdb-code)
- B - [Code related to OSGeo TMS](#osgeo-tms-code)
- C - [Sampling and statistics code](#sampling-and-statistics)
- D - [Miscellaneous tools](#miscellaneous-tools)
- E - [Start of a GUI application to make use of the different elements](#gui-application-beginnings)

_A word of warning_ This was developed by the author for the dissertation and due to time constraints, there are aspects that are hard coded, not pretty and may require running in an OSGeo4W shell, or ensure your environment has GDAL accessible. 
_It is not pretty Python code! ...but it did work for the research._

## OGC CDB Code
### CDB Folder structure
This has a class for CDB which allows you to provide a lat / long and it will identify the different CDB characteristics like slide ID, file name etc.

### Elevation Walker
This tool takes an elevation folder path in an OGC CDB compliant terrain set, and then 'walks' the directory, identifying every Level of detail in it, and the files - it generates a .txt file of all of the files for use in the LOD to VRT Tool

### CDB to LOD vrt
This tool takes the a file path generated by the Elevation Walker and then creates a virtual raster for that Level of detail

## OSGeo TMS Code
### TMS Tile calculator
This has three main functions:
- _GetTileCoordinate_ - This takes in a lat / long and returns the TMS X and Y Tile coordinate
- _GetTileCorners_ - This takes in the X and Y Tile coordinate, and returns the Upper left and Lower Right lat / long of the tile (for geotransform)
- _GetTileRange_ - This prints out the list of tiles needed, based on an input extent [Upper left and Lower Right, in lat / long]

### TMS Tile fetcher
Based on the output of _GetTileRange_ this has the values needed to use the tile fetcher. The script is very basic and hard coded, relying on a local TMS response. Further developments would see this get the response, stored the particulars in an object, and then use this as the basis for the tile requests.

### TMS GDAL Translate
This is used in the folder of the downloaded tiles, it gets all files (checking for correct extension) and then creates a list which is then used with _GetTileCorners_ and then GDAL Translate to complete a Geotransform on the tiles.
Once the Transform is complete, it checks to see if a 'Translated' folder has been made, and if not makes one for the geotransformed tiles to be saved in.
The final step is to add all the files in the translated folder to a virtual raster, making the data accessible in QGIS or GDAL for further work.

## Sampling and Statistics
These tools were used for the sampling and analysis
### Interpolation Sampling
One large function that conducts 5 interpolation sampling methods on the inputted raster:
- GDAL Nearest
- GDAL Bilinear
- GDAL Cubic
- WarpedVRT Nearest
- WarpedVRT Bilinear

The results of each sampling algorithm are added as new columns and saved as the given filename when calling the function.

### Sample Results Statistics
This script had a lot of development and modifications, with some dead code in it... 
The crux of this was used to take the output of Interpolation Sampling, and then conduct the following analysis on it 
- Calculate the range at each sample location, grouped by the interpolation algoritm - output as a histogram
- Calculate RMSE values on the control data experiment
- Calculate absolute difference, for the case study, using EGM96 values
- Conduct Friedman test on the data, based on an interpolation Algorithm label
 
### Resampling GDAL
This tool takes filepaths of a raster from each dataset to get their pixel values, then resamples a control dataset to the new pixel sizes. Creating a new 'case study set of data' using a control source. This is then used in the Sampling and Statistics scripts.

## Miscellaneous tools
### Slope Analysis
This was used to generate the figure comparing the range in the case study and control, compared to the slope value at each sample location. 

### Unit size per pixel 
This as used to generate a table of pixel sizes based on TMS levels of details.
It has an input latitude range, and longitudes and produces the table that shows how the unit size in degrees when converted to m changes due to the change in latitude. 

This was in an effort to have a more accurate approximation of pixel coverage in metres, and the specific locations being investigated.

To note, originally there was a thought that it wasn't working correctly, however it isn't until around 8 decimal places that the changes become apparent. Initial attempts had less than 8 decimal places, but when increased to 12 the changes were apparent.

## GUI application.. beginnings
This was the beginning of a GUI application. Originally the intent was this would be usable by a non-GIS user to extract a subset of data from their simulator terrain dataset. However, due to time constraints this effort was stopped as it became apparent there wasn't scope to include it in the disseration, based on the other research conducted... This may get developed further at a later date... 


